# Приложение 'Курсы обучения (программа 1С)'
Модели: студент, категория, курс, оплата, оценка, Отзыв
суперюзер - full_admin, 123456123

Данное приложение представляет собой **сайт для компании, которая проводит курсы обучения
по программе 1С**.

Актуальность в том, что компания реальная, я в ней работаю в настоящее время, и хотя 
сейчас функционал сайта довольно ограниченный, его можно расширять и примерять в работе. 

В приложение включены следующие модели:
1) Категория курса (Category) 
Поля:
* наименование
* флаг категории (метка для отборов)

2) Курс (Course)
Поля:
* наименование
* категория (внешний ключ)
* описание курса
* продолжительность курса, в мес.
* стоимость в месяц, азн.
* дата создания
* галочка "is_deleted" (например, чтобы закрыть курс вместо полного удаления из базы)
* дата удаления (закрытия)
* рейтинг курса - недоступно для редактирования через админ панель, рассчитывается автоматически при добавлении отзыва
* количество просмотров 
Кроме того, модель Курс включает встроенные **методы расчет общей стоимости курса, расчет рейтинга и get_absolute_url** (получение URL-адреса для отображения страницы конкретного курса)

3) Студент (Student)
Поля:
* связанный пользователь (внешний ключ)
* имя 
* фамилия 
* телефон
* дата рождения
* курс (внешний ключ)
* фото
* полное имя (full_name, @property)
* статус - выбор из набора значений (устанавливаются автоматически)

Статусы устанавливаются автоматически:
- при подаче заявки - requested,
- при подтверждении заявки - approved (кроме того, происходит автоматическое добавление в группу Students)
- при подтверждении завершения обучения - finished (кроме того, происходит автоматическое удаление из группы Students и перевод в группу Archive)

* дата запроса (подачи заявки)
* дата регистрации (подтверждение заявки, начало обучения)
* дата обновления (при внесении изменений в запись)
* галочка "is_deleted" (деактивация вместо полного удаления из базы)
* дата удаления (деактивации)
* признак завершения обучения (is_finished, @property) - расчитывается с учетом даты регистрации и продолжительности курса. Студенты, у которых этот признак = True, выводятся на панели навигации отдельным списком (видимость только для сотрудников, is_staff) с возможностью добавить их в архив (по кнопке "Добавить в архив"). 
Дана возможность ручного подтверждения завершения обучения, т.к. могут быть незакрытые вопросы по документам, оплате и проч. Но при этом сотрудник знает, что период обучения студента завершен. По этому признаку можно также закрывать доступы к каким-то материалам, например (не реализовано). 

Кроме того, модель Студент включает встроенные **методы расчет среднего балла студента, расчет остатка к оплате и get_absolute_url** (получение URL-адреса для отображения страницы конкретного студента)

4) Успеваемость студента (Performance)
Поля:
* оценка - выбор из набора значений
* студент (внешний ключ)
* дата оценки
* дата изменения (в перспективе доработка для возможности корректировки оценок)

5) Оплата (Payment)
Поля:
* студент (внешний ключ)
* сумма оплаты
* дата оплаты
* документ, подтверждающий оплату - файл (с выведением по ссылке в личном кабинете и на странице детальной информации о студенте)
* дата добавления
* дата изменения
Предусмотрено внесение оплаты по частям

6) Отзыв (Review)
Поля: 
* студент (внешний ключ), который оставил отзыв (сотрудники оставлять или редактировать отзывы не могут)
* курс (внешний ключ), к которому относится отзыв
* текст отзыва
* оценка - выбор из набора значений
* дата добавления
Модель Отзыв включает также встроенный **метод выведения только части содержимого текста**

Описание полного функционала, который предоставляется приложением.
Сайт включает 4 вкладки: 
### Главная 
Отображается приветствие и  причины для изучения 1 С (мотивация), в дальнейшем планируется добавить карусель из 5 
наиболее популярных курсов (по количеству просмотров);
### Курсы 
Вкладка при нажатии отображает доступные Категории курсов. При выборе категории открывается страница 
со списком курсов **выбранной категории**. Для каждого курса в списке показано Наименование, Продолжительность обучения, 
а также кнопка "Добавить оценки по курсу". 

Кнопка "Добавить оценки по курсу" перенаправляет на страницу с формой для добавления оценок. Причем, к выбору доступны только **студенты выбранного курса**. При добавлении оценки конкретному студенту, форма открывается для добавления  оценки другому студенту этого же курса.  

Чтобы завершить работу с формой и вернуться на страницу списка курсов, пользователю необходимо нажать кнопку "Завершить". 

На странице со списком курсов Наименование курса является активной ссылкой, которая открывает страницу с детальной информацией
по выбранному курсу. А именно: 
1) Общая информация по курсу: 
- Наименование
- Категория
- Краткое описание
- Продолжительность обучения
- Полная стоимость обучения
- Рейтинг (обновляется автоматически при добавлении нового отзыва о курсе).
- Количество просмотров
- кнопка "Подать заявку". 

При **подаче заявки** добавлена проверка: если для этого пользователя на данном курсе уже зарегистрирован студент со статусом "approved" (активный студент) либо со статусом "requested" (подана заявка на обучение), выводится соответствующее сообщение и заявка не регистрируется. 
Если по выбранному курсу для пользователя студент не зарегистрирован, то откроется форма для регистрации нового студента. 
При этом в форме Имя, Фамилия и Электронная почта заполнены по умолчанию (с возможностью изменения) соответствующими значениями для пользователя. 

Результат успешной отправки формы - создается экземпляр модели Student с указанными данными, статус по умолчанию устанавливается 'r' (requested) и происходит перенаправление в Личный кабинет пользователя. 

2) Отзывы: 
- Форма для добавления нового отзыва (доступна ТОЛЬКО для студентов):
* комментарий
* оценка (от 1 до 5) - при добавлении нового отзыва автоматически пересчитывается Рейтинг курса

- Комментарии (пользователь, дата добавления, оценка, текст комментария)

3) Студенты - список активных (статус 'а' - approved) студентов данного курса с указание ФИО и среднего балла студента. 
Если на данном курсе активных студенов нет, выводится соответствующее сообщение. 
ФИО студента является активной ссылкой, которая ведет на страницу с детальной информацией по данному студенту. Описание детальной страницы студента дано ниже по тексту. 

### Контакты 
Добавлены контакты (адрес, телефон, эл.почта контактного лица) - тестово.

### Личный кабинет
Открывается личный кабинет с детальной информацией студента. Если студент обучается/ обучался/ подал заявку на обучение
более, чем на одном курсе, вся информация будет предоставлена в разрезе курсов. 
В личном кабинете отражаются следующие данные: 
* фото;
* кнопка "Добавить фото" (если фото отсутствует) - переводит на форму добавления фото;
* ссылка "Редактировать фото" - если фото есть - переводит на форму добавления фото, фото заменяется;
* телефон;
* эл.почта;
* дата рождения;

Для тех, кто еще только подал заявку на обучение, но не подтвержден: 
- дата подачи заявки;
- сообщение, что заявка находится на рассмотрении.

Для активных студентов и студентов, находящихся в архиве:
- дата регистрации;
- средний балл (успеваемость) - пересчитывается автоматически при добавлении новых оценок;
- пометка "Обучение завершено" (только для студентов в архиве);
- статус оплаты (оплачено частично, оплачено полностью, оплаты нет) - данный статус автоматически оперделяется при добавлении платежей;
- блок "Данные оплаты", где отражается информация: 
* общая стоимость обучения;
* остаток для оплаты;
* данные по платежам (если платежей нет - соответствующее сообщение):
- сумма;
- дата оплаты;
- документ, подтверждающий оплату (ссылка). Если документ (файл) отсутствует, выводится соответствующее сообщение;

Помимо вкладок, есть следующие разделы (представлены на боковой панели навигации):
#### Авторизация
- Имя пользователя;
- Ссылки на Вход / Выход
По ссылке "Вход" идет переадресация на форму аутентификации пользователя (логин, пароль). Там же есть ссылка для 
позможности регистрации, если пользователь еще не существует. В форме регистрации добавлено поле подтверждения пароля и верификация на совпадение пароля и его подтверждения. 

По ссылке "Выход" производится выход и перенаправление на главную страницу сайта.
#### Обучение
Раздел содержит 3 ссылки: 
- Заявки на обучение (с указанием количества, если заявки есть);
- Студенты;
- Архив.

Каждая из ссылок ведет на страницу со списком студентов, информация на которой изменяется в зависимости от статуса студента (required, approved, finished).

##### Заявки на обучение**
**В разрезе курсов** отображает список людей, которые подали заявки на обучение (статус required).
Указывается фамилия, имя и дата подачи заявки. 
Тут же выводится кнопка "Обработать заявку", которая перенаправляет на форму подтверждения заявки. 
При выборе варианта "Принять" происходит:
* изменение статуса студента на approved
* устанавливается текущая дата в качестве даты регистрации
* пользователь добавляется в группу Students.

#### Оплата


Детальная информация студента
- ФОТО (если есть);
- телефон;
- эл.почта;
- дата рождения;

Для тех, кто еще только подал заявку на обучение, но не подтвержден: 
- дата подачи заявки;
- кнопка "Обработать заявку" - ссылка на форму Подтверждения заявки 
***вариант "Отклонить" на форме пока возвращает на страницу, на которой была нажата кнопка, планируется добавить туда деактивацию/удаление студента (is_deleted=True);

Для активных студентов и студентов, находящихся в архиве:
- курс, на котором обучается студент;
- дата регистрации;
- средний балл (успеваемость) - пересчитывается автоматически при добавлении новых оценок;
- пометка "Обучение завершено" (только для студентов в архиве);
- статус оплаты (оплачено частично, оплачено полностью, оплаты нет) - данный статус автоматически оперделяется при добавлении платежей;
- кнопка "Добавить данные по оплате" (кроме статуса "Оплачено полностью") - открывает форму добавления платежа по курсу. 
При этом в форме по умолчанию заполнено ФИО текущего студента, сумма оплаты (равная неоплаченному остатку), текущая дата;
При отправке формы дополнительно проверяется сумма (не должна превышать неоплаченный остаток) и дата платежа (не должна превышать текущую дату).

- блок "Данные оплаты", где отражается информация: 
* общая стоимость обучения;
* остаток для оплаты;
* данные по платежам (если платежей нет - соответствующее сообщение):
- сумма;
- дата оплаты;
- документ, подтверждающий оплату (ссылка). Если документ (файл) отсутствует, выводится соответствующее сообщение;
- кнопка "Редактировать платеж" - открывает форму добавления платежа, с той лишь разницей, что по умолчанию поля заполнены текущими данными по платежу (студент, дата платежа, сумма). 
Проверки при отправке формы срабатывает так же, как и при добавлении платежа. Но при расчете остатка к оплате 
учитывается тот факт, что платеж не добавляется, а изменяется уже существующий.



В настоящее время в приложении применяется разделение пользователей на 6 групп (с различием по доступам к функционалу сайта):
1) неавторизованные пользователи;
Авторизованные пользователи:
2) Студент (группа Students);
3) Архив (группа Archived - студенты, завершившие обучение);
4) Сотрудник (признак is_stuff);
5) Преподаватель (признак is_stuff, группа Teachers - права на добавление/изменение модели Performance);
6) Бухгалтер (признак is_stuff, группа Accountant - права на добавление/изменение модели Payment).

Ниже подробнее представляю описание доступный действий/просмотра для представителей каждой из групп. 

Неавторизованные пользователи.






Для неавторизованных пользователей: 
* Главная страница (5 самых популярных курсов (по количеству просмотров));
* Список курсов, по которым предоставляется обучение. Для каждого курса отображается следующая информация: 
